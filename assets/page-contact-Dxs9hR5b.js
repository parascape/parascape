import{r as l,c as E,j as e,C,d as q,e as F,H as k}from"./vendor-react-BbpXkAOK.js";import{o as L,s as i,t as A,J as S}from"./vendor-common-B01BXthH.js";import{B}from"./ui-button-DahdLBA6.js";import{F as _,a as c,b as m,c as d,d as u,e as x}from"./ui-form-BQtLIqXc.js";import{I as p}from"./ui-input-n72V4FZ-.js";import{T as $}from"./ui-textarea-4GjhHJks.js";import{a as I,E as M}from"./features-20bwZNYJ.js";import{L as W}from"./ui-loading-OBgFkkL5.js";const z={baseUrl:"/parascape",apiUrl:"http://localhost:3000",isProduction:!0,isDevelopment:!1,api:{formSubmission:"https://hjhpcawffvgcczhxcjsr.supabase.co/functions/v1/handle-form-submission"},getAssetPath:a=>`/parascape${a.startsWith("/")?a:`/${a}`}`},D=L({name:i().min(2,"Please enter your full name").max(100,"Name is too long"),email:i().email("Please enter a valid email address").max(100,"Email is too long"),business:i().min(1,"Please enter your business name").max(100,"Business name is too long"),phone:i().max(20,"Phone number is too long").optional().transform(a=>a===""?void 0:a),about:i().min(10,"Please provide more details about your request").max(1e3,"Message is too long"),honeypot:i().optional()}),P=3,O=1e3;function Y({type:a}){const[h,j]=l.useState(!1),[b,y]=l.useState(0),[g,N]=l.useState(null),f=l.useRef(!1),s=E({resolver:A(D),defaultValues:{name:"",email:"",business:"",phone:"",about:"",honeypot:""},mode:"onBlur"}),n=a==="audit";l.useEffect(()=>{n&&s.setValue("about","I would like to request a free digital presence audit for my business.")},[n,s]);const R=r=>new Promise(t=>setTimeout(t,r));async function w(r,t=0){try{const o=await fetch(z.api.formSubmission,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({...r,type:n?"audit_request":"contact"})});if(!o.ok){const v=await o.json();throw v.error==="Too many submissions. Please try again later."?new Error("Rate limit exceeded. Please try again in a few minutes."):new Error(v.message||"Failed to submit form")}return o}catch(o){if(t<P)return y(t+1),await R(O*Math.pow(2,t)),w(r,t+1);throw o}}async function T(r){if(!f.current){f.current=!0;try{j(!0),N(null);const o=await(await w(r)).json();I.track({name:"form_submission",properties:{form:n?"audit_request":"contact",business:r.business}}),S.success(n?"Thank you! We'll send your audit within 24 hours.":"Thank you for your message! We'll be in touch soon."),s.reset()}catch(t){const o=t instanceof Error?t.message:"We're having trouble submitting your form. Please try again.";N(o),S.error(o),console.error("Form submission error:",t)}finally{j(!1),y(0),setTimeout(()=>{f.current=!1},1e3)}}}return e.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 space-y-8 bg-white rounded-lg shadow-lg animate-fade-up",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-parascape-green",children:n?"Request Your Free Audit":"Get in Touch"}),e.jsx("p",{className:"text-gray-500",children:n?"We'll analyze your digital presence and provide actionable insights.":"Ready to transform your business? Let's start a conversation."}),e.jsx("p",{className:"text-sm text-gray-400",children:"* Required fields"})]}),g&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md flex items-start space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-700",children:g}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Please try again or contact us directly at contact@parascape.com"})]})]}),e.jsx(_,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(T),className:"space-y-6",children:[e.jsx(c,{control:s.control,name:"name",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:"Name *"}),e.jsx(u,{children:e.jsx(p,{placeholder:"John Doe",...r,"aria-required":"true",autoComplete:"name",className:s.formState.errors.name?"border-red-500":""})}),e.jsx(x,{})]})}),e.jsx(c,{control:s.control,name:"email",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:"Email *"}),e.jsx(u,{children:e.jsx(p,{type:"email",placeholder:"john@example.com",...r,"aria-required":"true",autoComplete:"email",className:s.formState.errors.email?"border-red-500":""})}),e.jsx(x,{})]})}),e.jsx(c,{control:s.control,name:"business",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:"Business Name *"}),e.jsx(u,{children:e.jsx(p,{placeholder:"Your Business LLC",...r,"aria-required":"true",autoComplete:"organization",className:s.formState.errors.business?"border-red-500":""})}),e.jsx(x,{})]})}),e.jsx(c,{control:s.control,name:"phone",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:"Phone"}),e.jsx(u,{children:e.jsx(p,{type:"tel",placeholder:"(555) 123-4567",...r,autoComplete:"tel",className:s.formState.errors.phone?"border-red-500":""})}),e.jsx(x,{}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional, but recommended for faster communication"})]})}),e.jsx(c,{control:s.control,name:"about",render:({field:r})=>e.jsxs(m,{children:[e.jsx(d,{children:"Message *"}),e.jsx(u,{children:e.jsx($,{placeholder:"Tell us about your business goals and how we can help...",className:`min-h-[120px] ${s.formState.errors.about?"border-red-500":""}`,...r,"aria-required":"true"})}),e.jsx(x,{})]})}),e.jsx("input",{type:"text",tabIndex:-1,...s.register("honeypot"),style:{position:"absolute",left:"-9999px"},"aria-hidden":"true"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["By submitting this form, you agree to our"," ",e.jsx("a",{href:"/privacy",className:"text-parascape-green hover:underline",children:"Privacy Policy"})]}),e.jsx(B,{type:"submit",className:"w-full bg-parascape-green hover:bg-parascape-green/90 transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",disabled:h||!s.formState.isValid,children:h?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),b>0?`Retrying... (${b}/${P})`:"Submitting..."]}):"Start Your Digital Transformation"})]})]})})]})}const J=()=>{const{type:a}=F();return e.jsxs(M,{children:[e.jsxs(k,{children:[e.jsxs("title",{children:[a==="audit"?"Digital Audit Request":"Contact Us"," - Parascape"]}),e.jsx("meta",{name:"description",content:a==="audit"?"Request a comprehensive digital audit for your business from Parascape.":"Get in touch with Parascape for your digital transformation needs."})]}),e.jsxs("div",{className:"py-12 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:a==="audit"?"Request Digital Audit":"Contact Us"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:a==="audit"?"Let us analyze your digital presence and identify opportunities for growth.":"Have a project in mind? We'd love to hear from you."})]}),e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"max-w-2xl mx-auto p-8",children:e.jsx(W,{variant:"skeleton"})}),children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(Y,{type:a})})})]})]})},ee=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{ee as C,z as c};
